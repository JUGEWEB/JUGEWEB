{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const BASE_URL=\"https://api.malidag.com\";// Base URL for items API\nconst ShoesHeader=()=>{const[selectedType,setSelectedType]=useState('');const[image,setImage]=useState(null);const[imageUrl,setImageUrl]=useState(null);const[loading,setLoading]=useState(false);const[genreTypePairs,setGenreTypePairs]=useState([]);// Store unique genre-type pairs\nuseEffect(()=>{// Fetch items and filter shoes types with genre\nconst fetchGenreTypePairs=async()=>{try{const response=await axios.get(`${BASE_URL}/items`);const data=response.data.items;// Filter shoes items\nconst shoesItems=data.filter(item=>item.category.toLowerCase()===\"shoes\");// Extract unique genre-type pairs\nconst uniquePairs=[...new Set(shoesItems.map(item=>`${item.item.genre.toLowerCase()}-${item.item.type.toLowerCase()}`))];setGenreTypePairs(uniquePairs);// Update state with unique genre-type pairs\n}catch(error){console.error(\"Error fetching shoes items:\",error);}};fetchGenreTypePairs();},[]);// Handle selecting genre-type pair\nconst handleTypeChange=e=>{setSelectedType(e.target.value);setImageUrl(null);// Reset image if changing genre-type pair\n};// Handle image upload for selected genre-type pair\nconst handleImageUpload=async e=>{const file=e.target.files[0];if(!file)return;if(!selectedType){alert('Please select a genre-type pair before uploading.');return;}const formData=new FormData();formData.append('image',file);try{setLoading(true);const response=await axios.post(`https://api.malidag.com/shoes/${selectedType}/image`,// Adjust API endpoint\nformData,{headers:{'Content-Type':'multipart/form-data'},withCredentials:false// Ensure CORS does not block\n});setImageUrl(response.data.imageUrl);setImage(file);}catch(error){var _error$response;console.error('Error uploading image:',((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data)||error.message);alert('Failed to upload image. Please try again.');}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Shoes Header\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedType,onChange:handleTypeChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Genre-Type\"}),genreTypePairs.map(pair=>/*#__PURE__*/_jsxs(\"option\",{value:pair,children:[pair.replace('-',' '),\" \"]},pair))]}),selectedType&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleImageUpload}),loading&&/*#__PURE__*/_jsx(\"p\",{children:\"Uploading...\"})]}),imageUrl&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Uploaded Image for \",selectedType.replace('-',' ')]}),/*#__PURE__*/_jsx(\"img\",{src:imageUrl,alt:selectedType,style:{width:'1200px',height:'auto',borderRadius:'8px'}})]})]});};export default ShoesHeader;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BASE_URL","ShoesHeader","selectedType","setSelectedType","image","setImage","imageUrl","setImageUrl","loading","setLoading","genreTypePairs","setGenreTypePairs","fetchGenreTypePairs","response","get","data","items","shoesItems","filter","item","category","toLowerCase","uniquePairs","Set","map","genre","type","error","console","handleTypeChange","e","target","value","handleImageUpload","file","files","alert","formData","FormData","append","post","headers","withCredentials","_error$response","message","children","onChange","pair","replace","accept","src","alt","style","width","height","borderRadius"],"sources":["C:/Users/User/Desktop/product/malidagproduct/src/components/shoesheader.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst BASE_URL = \"https://api.malidag.com\"; // Base URL for items API\r\n\r\nconst ShoesHeader = () => {\r\n  const [selectedType, setSelectedType] = useState('');\r\n  const [image, setImage] = useState(null);\r\n  const [imageUrl, setImageUrl] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [genreTypePairs, setGenreTypePairs] = useState([]); // Store unique genre-type pairs\r\n\r\n  useEffect(() => {\r\n    // Fetch items and filter shoes types with genre\r\n    const fetchGenreTypePairs = async () => {\r\n      try {\r\n        const response = await axios.get(`${BASE_URL}/items`);\r\n        const data = response.data.items;\r\n\r\n        // Filter shoes items\r\n        const shoesItems = data.filter((item) => item.category.toLowerCase() === \"shoes\");\r\n\r\n        // Extract unique genre-type pairs\r\n        const uniquePairs = [...new Set(shoesItems.map((item) => `${item.item.genre.toLowerCase()}-${item.item.type.toLowerCase()}`))];\r\n\r\n        setGenreTypePairs(uniquePairs); // Update state with unique genre-type pairs\r\n      } catch (error) {\r\n        console.error(\"Error fetching shoes items:\", error);\r\n      }\r\n    };\r\n\r\n    fetchGenreTypePairs();\r\n  }, []);\r\n\r\n  // Handle selecting genre-type pair\r\n  const handleTypeChange = (e) => {\r\n    setSelectedType(e.target.value);\r\n    setImageUrl(null); // Reset image if changing genre-type pair\r\n  };\r\n\r\n  // Handle image upload for selected genre-type pair\r\n  const handleImageUpload = async (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n\r\n    if (!selectedType) {\r\n      alert('Please select a genre-type pair before uploading.');\r\n      return;\r\n    }\r\n\r\n    const formData = new FormData();\r\n    formData.append('image', file);\r\n\r\n    try {\r\n      setLoading(true);\r\n      const response = await axios.post(\r\n        `https://api.malidag.com/shoes/${selectedType}/image`, // Adjust API endpoint\r\n        formData,\r\n        {\r\n          headers: {\r\n            'Content-Type': 'multipart/form-data'\r\n          },\r\n          withCredentials: false // Ensure CORS does not block\r\n        }\r\n      );\r\n\r\n      setImageUrl(response.data.imageUrl);\r\n      setImage(file);\r\n    } catch (error) {\r\n      console.error('Error uploading image:', error.response?.data || error.message);\r\n      alert('Failed to upload image. Please try again.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Shoes Header</h1>\r\n\r\n      {/* Select Genre-Type pair */}\r\n      <select value={selectedType} onChange={handleTypeChange}>\r\n        <option value=\"\">Select Genre-Type</option>\r\n        {genreTypePairs.map((pair) => (\r\n          <option key={pair} value={pair}>\r\n            {pair.replace('-', ' ')} {/* Display as readable text (genre - type) */}\r\n          </option>\r\n        ))}\r\n      </select>\r\n\r\n      {/* Image Upload Section */}\r\n      {selectedType && (\r\n        <>\r\n          <input type=\"file\" accept=\"image/*\" onChange={handleImageUpload} />\r\n          {loading && <p>Uploading...</p>}\r\n        </>\r\n      )}\r\n\r\n      {/* Display the uploaded image */}\r\n      {imageUrl && (\r\n        <div>\r\n          <h2>Uploaded Image for {selectedType.replace('-', ' ')}</h2>\r\n          <img\r\n            src={imageUrl}\r\n            alt={selectedType}\r\n            style={{ width: '1200px', height: 'auto', borderRadius: '8px' }}\r\n          />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ShoesHeader;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAE1B,KAAM,CAAAC,QAAQ,CAAG,yBAAyB,CAAE;AAE5C,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CACxB,KAAM,CAACC,YAAY,CAAEC,eAAe,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CACpD,KAAM,CAACa,KAAK,CAAEC,QAAQ,CAAC,CAAGd,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAACe,QAAQ,CAAEC,WAAW,CAAC,CAAGhB,QAAQ,CAAC,IAAI,CAAC,CAC9C,KAAM,CAACiB,OAAO,CAAEC,UAAU,CAAC,CAAGlB,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACmB,cAAc,CAAEC,iBAAiB,CAAC,CAAGpB,QAAQ,CAAC,EAAE,CAAC,CAAE;AAE1DC,SAAS,CAAC,IAAM,CACd;AACA,KAAM,CAAAoB,mBAAmB,CAAG,KAAAA,CAAA,GAAY,CACtC,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAApB,KAAK,CAACqB,GAAG,CAAC,GAAGd,QAAQ,QAAQ,CAAC,CACrD,KAAM,CAAAe,IAAI,CAAGF,QAAQ,CAACE,IAAI,CAACC,KAAK,CAEhC;AACA,KAAM,CAAAC,UAAU,CAAGF,IAAI,CAACG,MAAM,CAAEC,IAAI,EAAKA,IAAI,CAACC,QAAQ,CAACC,WAAW,CAAC,CAAC,GAAK,OAAO,CAAC,CAEjF;AACA,KAAM,CAAAC,WAAW,CAAG,CAAC,GAAG,GAAI,CAAAC,GAAG,CAACN,UAAU,CAACO,GAAG,CAAEL,IAAI,EAAK,GAAGA,IAAI,CAACA,IAAI,CAACM,KAAK,CAACJ,WAAW,CAAC,CAAC,IAAIF,IAAI,CAACA,IAAI,CAACO,IAAI,CAACL,WAAW,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAE9HV,iBAAiB,CAACW,WAAW,CAAC,CAAE;AAClC,CAAE,MAAOK,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,6BAA6B,CAAEA,KAAK,CAAC,CACrD,CACF,CAAC,CAEDf,mBAAmB,CAAC,CAAC,CACvB,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAiB,gBAAgB,CAAIC,CAAC,EAAK,CAC9B3B,eAAe,CAAC2B,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAC/BzB,WAAW,CAAC,IAAI,CAAC,CAAE;AACrB,CAAC,CAED;AACA,KAAM,CAAA0B,iBAAiB,CAAG,KAAO,CAAAH,CAAC,EAAK,CACrC,KAAM,CAAAI,IAAI,CAAGJ,CAAC,CAACC,MAAM,CAACI,KAAK,CAAC,CAAC,CAAC,CAC9B,GAAI,CAACD,IAAI,CAAE,OAEX,GAAI,CAAChC,YAAY,CAAE,CACjBkC,KAAK,CAAC,mDAAmD,CAAC,CAC1D,OACF,CAEA,KAAM,CAAAC,QAAQ,CAAG,GAAI,CAAAC,QAAQ,CAAC,CAAC,CAC/BD,QAAQ,CAACE,MAAM,CAAC,OAAO,CAAEL,IAAI,CAAC,CAE9B,GAAI,CACFzB,UAAU,CAAC,IAAI,CAAC,CAChB,KAAM,CAAAI,QAAQ,CAAG,KAAM,CAAApB,KAAK,CAAC+C,IAAI,CAC/B,iCAAiCtC,YAAY,QAAQ,CAAE;AACvDmC,QAAQ,CACR,CACEI,OAAO,CAAE,CACP,cAAc,CAAE,qBAClB,CAAC,CACDC,eAAe,CAAE,KAAM;AACzB,CACF,CAAC,CAEDnC,WAAW,CAACM,QAAQ,CAACE,IAAI,CAACT,QAAQ,CAAC,CACnCD,QAAQ,CAAC6B,IAAI,CAAC,CAChB,CAAE,MAAOP,KAAK,CAAE,KAAAgB,eAAA,CACdf,OAAO,CAACD,KAAK,CAAC,wBAAwB,CAAE,EAAAgB,eAAA,CAAAhB,KAAK,CAACd,QAAQ,UAAA8B,eAAA,iBAAdA,eAAA,CAAgB5B,IAAI,GAAIY,KAAK,CAACiB,OAAO,CAAC,CAC9ER,KAAK,CAAC,2CAA2C,CAAC,CACpD,CAAC,OAAS,CACR3B,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,mBACEZ,KAAA,QAAAgD,QAAA,eACElD,IAAA,OAAAkD,QAAA,CAAI,cAAY,CAAI,CAAC,cAGrBhD,KAAA,WAAQmC,KAAK,CAAE9B,YAAa,CAAC4C,QAAQ,CAAEjB,gBAAiB,CAAAgB,QAAA,eACtDlD,IAAA,WAAQqC,KAAK,CAAC,EAAE,CAAAa,QAAA,CAAC,mBAAiB,CAAQ,CAAC,CAC1CnC,cAAc,CAACc,GAAG,CAAEuB,IAAI,eACvBlD,KAAA,WAAmBmC,KAAK,CAAEe,IAAK,CAAAF,QAAA,EAC5BE,IAAI,CAACC,OAAO,CAAC,GAAG,CAAE,GAAG,CAAC,CAAC,GAAC,GADdD,IAEL,CACT,CAAC,EACI,CAAC,CAGR7C,YAAY,eACXL,KAAA,CAAAE,SAAA,EAAA8C,QAAA,eACElD,IAAA,UAAO+B,IAAI,CAAC,MAAM,CAACuB,MAAM,CAAC,SAAS,CAACH,QAAQ,CAAEb,iBAAkB,CAAE,CAAC,CAClEzB,OAAO,eAAIb,IAAA,MAAAkD,QAAA,CAAG,cAAY,CAAG,CAAC,EAC/B,CACH,CAGAvC,QAAQ,eACPT,KAAA,QAAAgD,QAAA,eACEhD,KAAA,OAAAgD,QAAA,EAAI,qBAAmB,CAAC3C,YAAY,CAAC8C,OAAO,CAAC,GAAG,CAAE,GAAG,CAAC,EAAK,CAAC,cAC5DrD,IAAA,QACEuD,GAAG,CAAE5C,QAAS,CACd6C,GAAG,CAAEjD,YAAa,CAClBkD,KAAK,CAAE,CAAEC,KAAK,CAAE,QAAQ,CAAEC,MAAM,CAAE,MAAM,CAAEC,YAAY,CAAE,KAAM,CAAE,CACjE,CAAC,EACC,CACN,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAAtD,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}