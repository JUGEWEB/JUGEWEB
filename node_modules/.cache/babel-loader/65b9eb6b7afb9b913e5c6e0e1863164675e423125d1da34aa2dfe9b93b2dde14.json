{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const BASE_URL=\"https://api.malidag.com\";// Base URL for items API\nconst WomenHeader=()=>{const[selectedType,setSelectedType]=useState('');const[image,setImage]=useState(null);const[imageUrl,setImageUrl]=useState(null);const[loading,setLoading]=useState(false);const[womenTypes,setWomenTypes]=useState([]);// Fetch beauty types dynamically\nuseEffect(()=>{// Fetch items and filter beauty types\nconst fetchWomenTypes=async()=>{try{const response=await axios.get(`${BASE_URL}/items`);const data=response.data.items;// Filter beauty items and extract unique types\nconst womenItems=data.filter(item=>item.category!==\"Beauty\"&&item.item.genre===\"women\");const uniqueTypes=[...new Set(womenItems.map(item=>item.item.type.toLowerCase()))];setWomenTypes(uniqueTypes);// Update state with beauty types\n}catch(error){console.error(\"Error fetching beauty items:\",error);}};fetchWomenTypes();},[]);// Handle selecting beauty type\nconst handleTypeChange=e=>{setSelectedType(e.target.value);setImageUrl(null);// Reset image if changing type\n};const handleImageUpload=async e=>{const file=e.target.files[0];if(!file)return;if(!selectedType){alert('Please select a beauty type before uploading.');return;}const formData=new FormData();formData.append('image',file);try{setLoading(true);const response=await axios.post(`https://api.malidag.com/women/${selectedType}/image`,formData,{headers:{'Content-Type':'multipart/form-data'},withCredentials:false// Ensure CORS does not block\n});setImageUrl(response.data.imageUrl);setImage(file);}catch(error){var _error$response;console.error('Error uploading image:',((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data)||error.message);alert('Failed to upload image. Please try again.');}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Women Header\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedType,onChange:handleTypeChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Women Type\"}),womenTypes.map(type=>/*#__PURE__*/_jsxs(\"option\",{value:type,children:[type.replace('-',' '),\" \"]},type))]}),selectedType&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleImageUpload}),loading&&/*#__PURE__*/_jsx(\"p\",{children:\"Uploading...\"})]}),imageUrl&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Uploaded Image for \",selectedType.replace('-',' ')]}),/*#__PURE__*/_jsx(\"img\",{src:imageUrl,alt:selectedType,style:{width:'1200px',height:'auto',borderRadius:'8px'}})]})]});};export default WomenHeader;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BASE_URL","WomenHeader","selectedType","setSelectedType","image","setImage","imageUrl","setImageUrl","loading","setLoading","womenTypes","setWomenTypes","fetchWomenTypes","response","get","data","items","womenItems","filter","item","category","genre","uniqueTypes","Set","map","type","toLowerCase","error","console","handleTypeChange","e","target","value","handleImageUpload","file","files","alert","formData","FormData","append","post","headers","withCredentials","_error$response","message","children","onChange","replace","accept","src","alt","style","width","height","borderRadius"],"sources":["C:/malidagproduct/src/components/womenheader.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst BASE_URL = \"https://api.malidag.com\"; // Base URL for items API\r\n\r\nconst WomenHeader = () => {\r\n  const [selectedType, setSelectedType] = useState('');\r\n  const [image, setImage] = useState(null);\r\n  const [imageUrl, setImageUrl] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [womenTypes, setWomenTypes] = useState([]); // Fetch beauty types dynamically\r\n\r\n  useEffect(() => {\r\n    // Fetch items and filter beauty types\r\n    const fetchWomenTypes = async () => {\r\n      try {\r\n        const response = await axios.get(`${BASE_URL}/items`);\r\n        const data = response.data.items;\r\n\r\n        // Filter beauty items and extract unique types\r\n        const womenItems = data.filter((item) => item.category !== \"Beauty\" && item.item.genre === \"women\");\r\n        const uniqueTypes = [...new Set(womenItems.map((item) => item.item.type.toLowerCase()))];\r\n\r\n        setWomenTypes(uniqueTypes); // Update state with beauty types\r\n      } catch (error) {\r\n        console.error(\"Error fetching beauty items:\", error);\r\n      }\r\n    };\r\n\r\n    fetchWomenTypes();\r\n  }, []);\r\n\r\n\r\n  // Handle selecting beauty type\r\n  const handleTypeChange = (e) => {\r\n    setSelectedType(e.target.value);\r\n    setImageUrl(null); // Reset image if changing type\r\n  };\r\n\r\n  const handleImageUpload = async (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n\r\n    if (!selectedType) {\r\n      alert('Please select a beauty type before uploading.');\r\n      return;\r\n    }\r\n\r\n    const formData = new FormData();\r\n    formData.append('image', file);\r\n\r\n    try {\r\n      setLoading(true);\r\n      const response = await axios.post(\r\n        `https://api.malidag.com/women/${selectedType}/image`,\r\n        formData,\r\n        {\r\n          headers: {\r\n            'Content-Type': 'multipart/form-data'\r\n          },\r\n          withCredentials: false // Ensure CORS does not block\r\n        }\r\n      );\r\n\r\n      setImageUrl(response.data.imageUrl);\r\n      setImage(file);\r\n    } catch (error) {\r\n      console.error('Error uploading image:', error.response?.data || error.message);\r\n      alert('Failed to upload image. Please try again.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Women Header</h1>\r\n\r\n      {/* Select Beauty Type */}\r\n      <select value={selectedType} onChange={handleTypeChange}>\r\n        <option value=\"\">Select Women Type</option>\r\n        {womenTypes.map((type) => (\r\n          <option key={type} value={type}>\r\n            {type.replace('-', ' ')} {/* Display as readable text */}\r\n          </option>\r\n        ))}\r\n      </select>\r\n\r\n      {/* Image Upload Section */}\r\n      {selectedType && (\r\n        <>\r\n          <input type=\"file\" accept=\"image/*\" onChange={handleImageUpload} />\r\n          {loading && <p>Uploading...</p>}\r\n        </>\r\n      )}\r\n\r\n      {/* Display the uploaded image */}\r\n      {imageUrl && (\r\n        <div>\r\n          <h2>Uploaded Image for {selectedType.replace('-', ' ')}</h2>\r\n          <img\r\n            src={imageUrl}\r\n            alt={selectedType}\r\n            style={{ width: '1200px', height: 'auto', borderRadius: '8px' }}\r\n          />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WomenHeader;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}